<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	template="/WEB-INF/template/template_user.xhtml"
	xmlns:o="http://omnifaces.org/ui">

	<f:metadata>

		<o:viewParam name="orderrating" converter="#{orderConverter}"
			value="#{ratingOrdeBean.order}" />

		<f:event listener="#{ratingOrdeBean.preRenderView()}"
			type="preRenderView"></f:event>
	</f:metadata>


	<h:head>



	</h:head>

	<ui:define name="labelcenter">Meus pedidos</ui:define>


	<ui:define name="title">Meus pedidos</ui:define>>
	

	<ui:define name="container">

		<h:body>

			<h:form id="form">
				<p:growl id="msgs" showDetail="true" autoUpdate="true" />

				<div class="ui-fluid">

					<p:panelGrid layout="grid" columns="1">
						<p:outputLabel value="Avaliação do Pedido" style="font-size:2em"></p:outputLabel>

						<p:outputLabel value="Classificação"></p:outputLabel>
						<p:rating value="#{ratingOrdeBean.ratingOrder.number}"></p:rating>

						<p:outputLabel value="Comentario"></p:outputLabel>
						<p:inputTextarea value="#{ratingOrdeBean.ratingOrder.comments}"
							placeholder="Comente sobre sua experiência de compra conosco."></p:inputTextarea>

						<p:spacer></p:spacer>

					</p:panelGrid>

					<p:dataGrid var="item" value="#{ratingOrdeBean.order.itemProducts}"
						columns="1" layout="grid" id="itens_pedido">


						<p:panel>

							<p:outputLabel value="Avaliação do item" style="font-size:1.4em"></p:outputLabel>


							<p:panelGrid columns="1" style="width:100%" layout="grid">

								<p:outputLabel value="#{item.itemMenu.product.name}"
									style="font-size:1.2em"></p:outputLabel>


								<p:outputLabel value="Classificação"></p:outputLabel>

								<p:rating id="number_item"
									value="#{ratingOrdeBean.ratingProduct.number}">


								</p:rating>

								<p:outputLabel value="Comentario"></p:outputLabel>

								<p:inputTextarea value="#{ratingOrdeBean.ratingProduct.comment}"
									placeholder="Comente sobre o item comprado.">
								</p:inputTextarea>


								<p:toolbar style="background:white">

									<f:facet name="left">

										<p:commandButton value="adicionar"
											action="#{ratingOrdeBean.msgSucess()}">

											<p:collector unique="false"
												value="#{ratingOrdeBean.ratingProduct}"
												addTo="#{item.itemMenu.product.ratingProducts}"></p:collector>

											<f:setPropertyActionListener value="#{item.itemMenu.product}"
												target="#{ratingOrdeBean.ratingProduct.product}" />
										</p:commandButton>


									</f:facet>

								</p:toolbar>


							</p:panelGrid>
						</p:panel>

					</p:dataGrid>

					<p:toolbar style="background:white">

						<f:facet name="left">

							<p:commandButton value="Confirmar"
								action="#{ratingOrdeBean.save()}">
							</p:commandButton>

							<!-- <p:button value="cancelar" outcome="/pages/user/conf_cont_user"></p:button> -->

						</f:facet>

					</p:toolbar>
				</div>

			</h:form>
		</h:body>
	</ui:define>
</ui:composition>